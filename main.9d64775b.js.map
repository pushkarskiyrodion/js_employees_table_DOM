{"version":3,"sources":["scripts/main.js"],"names":["table","document","querySelector","tBody","sortGrid","index","array","item","direction","sort","a","b","first","cells","innerText","replace","second","isNaN","localeCompare","append","setNewEmployees","body","insertAdjacentHTML","form","addEventListener","e","preventDefault","data","FormData","inputName","input","target","elements","validateForm","value","reset","pushNotification","info","Object","fromEntries","entries","salary","Intl","NumberFormat","format","tr","createElement","key","td","normalize","prepend","name","length","employees","querySelectorAll","tagName","hasActive","find","element","classList","contains","removeAttribute","closest","add","cellIndex","style","width","innerHTML","focus","title","formInput","toLowerCase","cloneNode","remove","backgroundColor","outline","border","position","left","selectEvent","checked","keyEvent","includes","replaceAll","children","forEach","child","posTop","posRight","description","type","div","h2","p","top","right","setAttribute","fontSize","setTimeout","str","split","map","toUpperCase","slice","join"],"mappings":"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","file":"main.9d64775b.js","sourceRoot":"../src","sourcesContent":["'use strict';\n\nconst table = document.querySelector('table');\nconst tBody = document.querySelector('tbody');\n\ntable.addEventListener('click', (e) => {\n  const employees = tBody.querySelectorAll('tr');\n\n  if (e.target.tagName === 'TD') {\n    const hasActive = [...employees]\n      .find(element => element.classList.contains('active'));\n\n    if (hasActive) {\n      hasActive.removeAttribute('class');\n    }\n\n    const tr = e.target.closest('tr');\n\n    tr.classList.add('active');\n  }\n\n  if (e.target.tagName === 'TH') {\n    sortGrid(e.target.cellIndex, [...employees], e.target);\n  }\n});\n\ndocument.addEventListener('click', (e) => {\n  const employees = tBody.querySelectorAll('tr');\n\n  const hasActive = [...employees]\n    .find(element => element.classList.contains('active'));\n\n  if (e.target.tagName === 'BODY' && hasActive) {\n    hasActive.removeAttribute('class');\n  }\n});\n\nfunction sortGrid(index, array, item) {\n  if (item.direction === 'ASC') {\n    item.direction = 'DESC';\n\n    array.sort((a, b) => {\n      const first = a.cells[index].innerText.replace(/[$,]/g, '');\n      const second = b.cells[index].innerText.replace(/[$,]/g, '');\n\n      if (isNaN(first)) {\n        return first.localeCompare(second);\n      }\n\n      return first - second;\n    });\n  } else {\n    item.direction = 'ASC';\n\n    array.sort((a, b) => {\n      const first = a.cells[index].innerText.replace(/[$,]/g, '');\n      const second = b.cells[index].innerText.replace(/[$,]/g, '');\n\n      if (isNaN(first)) {\n        return second.localeCompare(first);\n      }\n\n      return second - first;\n    });\n  }\n\n  tBody.append(...array);\n}\n\nfunction setNewEmployees() {\n  const html = `\n    <form \n      class=\"new-employee-form\" \n      method=\"POST\" \n      id=\"employeesForm\"\n    >\n      <label>\n        Name: \n        <input \n          data-qa=\"name\"\n          type=\"text\" \n          name=\"name\"\n        >\n      </label>\n\n      <label>\n        Position: \n        <input\n          data-qa=\"position\" \n          type=\"text\" \n          name=\"position\"\n        >\n      </label>\n\n      <label>\n        Office\n        <select \n          data-qa=\"office\" \n          name=\"office\" \n          form=\"employeesForm\"\n        >\n          <option value=\"tokyo\">Tokyo</option>\n          <option value=\"singapore\">Singapore</option>\n          <option value=\"london\">London</option>\n          <option value=\"new york\">New York</option>\n          <option value=\"edinburgh\">Edinburgh</option>\n          <option value=\"san francisco\">San Francisco</option>\n        </select>\n      </label>\n\n      <label>\n        Age: \n        <input \n          data-qa=\"age\" \n          type=\"number\" \n          name=\"age\"\n        >\n      </label>\n\n      <label>\n        Salary: \n        <input \n          data-qa=\"salary\"\n          type=\"number\" \n          name=\"salary\"\n        >\n      </label>\n\n      <button type=\"submit\">Save to table</button>\n    </form>\n  `;\n\n  document.body.insertAdjacentHTML('beforeend', html);\n\n  const form = document.querySelector('#employeesForm');\n\n  form.addEventListener('submit', (e) => {\n    e.preventDefault();\n\n    const data = new FormData(form);\n\n    for (const [inputName] of data) {\n      const input = e.target.elements[inputName];\n\n      validateForm(input);\n\n      if (input.value === '') {\n        return;\n      }\n    }\n\n    form.reset();\n\n    pushNotification(10, 10, 'Success message',\n      'A new employee is successfully added to the table', 'success');\n\n    const info = Object.fromEntries(data.entries());\n\n    info.salary = `$${Intl.NumberFormat('en-US').format(info.salary)}`;\n\n    const tr = document.createElement('tr');\n\n    for (const key in info) {\n      const td = document.createElement('td');\n\n      td.innerText = normalize(info[key]);\n\n      tr.append(td);\n    }\n\n    tBody.prepend(tr);\n  });\n};\n\ntBody.addEventListener('dblclick', (e) => {\n  const value = e.target.innerText;\n  const input = document.createElement('input');\n  const td = e.target.closest('td');\n\n  input.style.width = '90px';\n  input.classList.add('cell-input');\n  input.style.width = '90px';\n\n  td.innerHTML = '';\n  td.append(input);\n  input.focus();\n\n  const title = [...document.querySelectorAll('th')].find(item => {\n    return item.cellIndex === td.cellIndex;\n  });\n\n  const formInput = title.innerText !== 'Office'\n    ? document.querySelector(`input[name=\"${title.innerText.toLowerCase()}\"]`)\n    : document.querySelector('select').cloneNode(true);\n\n  if (formInput.tagName === 'SELECT') {\n    input.innerHTML = '';\n    td.append(formInput);\n    input.remove();\n    formInput.style.backgroundColor = 'inherit';\n    formInput.style.outline = 'none';\n    formInput.style.border = 'none';\n    formInput.style.width = '18px';\n    formInput.style.position = 'relative';\n    formInput.style.left = '80px';\n\n    formInput.addEventListener('change', (selectEvent) => {\n      td.innerText = normalize(selectEvent.target.value);\n      formInput.remove();\n\n      pushNotification(10, 10, 'Success message',\n        'Employee\\'s information is successfully changed', 'success');\n    });\n  }\n\n  input.addEventListener('focusout', () => {\n    if (e.checked) {\n      return;\n    }\n\n    td.innerText = value;\n  });\n\n  input.addEventListener('keyup', (keyEvent) => {\n    if (keyEvent.key === 'Enter') {\n      e.checked = true;\n      input.name = formInput.name;\n\n      td.innerText = validateForm(input) === ''\n        ? value\n        : normalize(input.value);\n\n      if (value.includes('$')) {\n        td.innerText = `\n          $${Intl.NumberFormat('en-US').format(input.value.replaceAll('$', ''))}\n        `;\n\n        [...td.children].forEach(child => child.remove());\n\n        if (td.innerText === '$NaN') {\n          td.innerText = value;\n        }\n      }\n\n      if (td.innerText !== value) {\n        pushNotification(10, 10, 'Success message',\n          'Employee\\'s information is successfully changed', 'success');\n      }\n    }\n  });\n});\n\nsetNewEmployees();\n\nfunction validateForm(input) {\n  if (input.name === 'name') {\n    input.value = input.value.length >= 4\n      ? input.value\n      : pushNotification(10, 10, 'Error message',\n        'Value of name has less than 4 letters', 'error', input);\n  }\n\n  if (input.name === 'age') {\n    input.value = input.value >= 18 && input.value < 90\n      ? input.value\n      : pushNotification(10, 10, 'Error message',\n        'Value of age is less than 18 or more than 90 or not a number',\n        'error', input);\n  }\n\n  if (input.name === 'position') {\n    input.value = input.value.length >= 6\n      ? input.value\n      : pushNotification(10, 10, 'Error message',\n        'Value of position is less than 6 characters', 'error', input);\n  }\n\n  if (input.name === 'salary') {\n    input.value = input.value > 0\n      ? input.value\n      : pushNotification(10, 10, 'Error message',\n        'Enter correct data', 'error', input);\n  }\n\n  return input.value;\n}\n\nconst pushNotification = (\n  posTop, posRight, title, description, type = '', input\n) => {\n  const div = document.createElement('div');\n  const h2 = document.createElement('h2');\n  const p = document.createElement('p');\n\n  if (type === 'error') {\n    input.focus();\n  }\n\n  div.classList.value = `notification ${type}`;\n  div.style.top = `${posTop}px`;\n  div.style.right = `${posRight}px`;\n  div.setAttribute('data-qa', 'notification');\n\n  h2.classList.add('title');\n  h2.innerText = title;\n  h2.style.fontSize = '16px';\n\n  p.innerText = description;\n  p.style.fontSize = '12px';\n\n  div.append(h2, p);\n  document.body.append(div);\n  setTimeout(() => div.remove(), 3000);\n\n  return '';\n};\n\nfunction normalize(str) {\n  return str.split(' ')\n    .map(element => element[0].toUpperCase() + element.slice(1))\n    .join(' ');\n};\n"]}